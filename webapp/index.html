<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>–ü—Ä–æ—Ñ–¢—Ä–µ–π–¥–õ–∞–± ‚Äî 8-bit Runner</title>
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="46" fill="%2353B5AF"/><text x="50" y="70" text-anchor="middle" font-size="70" fill="black">üß™</text></svg>'>
  <style>
    :root{--brand:#53B5AF;--bg:#000000;--card:#000000;--text:#ffffff;--muted:#cfe9e7;--pad:12px;--app-height:100vh}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:monospace;background:var(--bg);color:var(--text)}
    #app-root{position:relative;width:100%;min-height:var(--app-height);display:flex}
    .portrait-force-landscape #app-root{position:fixed;inset:0;transform:rotate(90deg);transform-origin:top left;width:calc(var(--app-height));height:100vw;overflow:hidden;z-index:1}
    .wrap{flex:1;display:flex}
    .card{flex:1;display:flex;flex-direction:column;background:var(--card);border:3px solid var(--brand);image-rendering:pixelated;box-shadow:0 0 18px rgba(83,181,175,.35)}
    h1{font-size:20px;margin:0;padding:10px var(--pad);display:flex;align-items:center;gap:10px;background:linear-gradient(45deg, rgba(83,181,175,.10), rgba(83,181,175,.10));border-bottom:1px solid rgba(83,181,175,.35);color:var(--text)}
    .gameBox{flex:1;display:flex;flex-direction:column;min-height:0}
    canvas{display:block;width:100%;height:auto;background:#000000;image-rendering:pixelated;touch-action:manipulation;-webkit-user-select:none;user-select:none}
    .bar{display:flex;justify-content:space-between;align-items:flex-start;gap:8px;padding:8px var(--pad);flex-wrap:wrap}
    .hint{font-size:12px;color:var(--muted)}
    .btn{background:#000000;color:var(--text);border:2px solid var(--brand);padding:8px 12px;cursor:pointer;border-radius:8px}
    .btn:active{background:var(--brand);color:#000000}
    .btn.brand{background:var(--brand);color:#000000;border-color:transparent}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.92);display:none;align-items:center;justify-content:center;padding:16px;z-index:999;height:var(--app-height)}
    .panel{background:#000000;border:3px solid var(--brand);border-radius:10px;box-shadow:0 0 18px rgba(83,181,175,.35);width:100%;max-width:860px;max-height:calc(var(--app-height) - 32px);display:flex;flex-direction:column}
    .panel .inner{display:grid;gap:14px;padding:16px;grid-template-columns:1fr 320px;overflow:auto}
    @media (max-width:740px){.panel .inner{grid-template-columns:1fr}}
    .field{margin:6px 0}
    .rotate-hint{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.9);color:#ffffff;z-index:10000;text-align:center;padding:16px;border:3px solid var(--brand)}
    .rotate-hint.show{display:flex}
    #regOverlay .panel,#resultOverlay .panel{background:#ffffff;border:2px solid #e5e5e5;box-shadow:0 6px 28px rgba(0,0,0,.18)}
    #regOverlay h2,#resultOverlay h2,#regOverlay label,#resultOverlay p,#regOverlay .note,#regOverlay .prizes h3,#regOverlay .prizes,#resultOverlay{color:#000000}
    #regOverlay input[type="text"],#regOverlay input[type="tel"],#regOverlay input[type="email"]{width:100%;background:#ffffff;border:2px solid #e5e5e5;color:#000000;padding:8px;border-radius:6px;margin-top:4px}
    #regOverlay .checkbox{color:#000000}
    #regOverlay .prizes{background:#ffffff;border:2px solid #e5e5e5}
    #regOverlay .prize-row{border-bottom:1px dashed #e5e5e5}
    #regOverlay .note{color:#444444}
    #regOverlay .btn.brand,#resultOverlay .btn.brand{background:rgb(83,181,175);color:#000000;border-color:transparent}
    #resultOverlay b{color:#000000}
  </style>
</head>
<body>
  <div id="app-root">
    <div class="wrap">
      <div class="card">
        <h1>üß™ –ü—Ä–æ—Ñ–¢—Ä–µ–π–¥–õ–∞–± 8-bit Runner</h1>
        <div class="gameBox">
          <canvas id="game" width="1200" height="400"></canvas>
          <div class="bar">
            <div>–û—á–∫–∏: <span id="score">0</span> ¬∑ –†–µ–∫–æ—Ä–¥: <span id="best">0</span> ¬∑ –û—Å—Ç–∞–ª–æ—Å—å: <span id="timeLeft">02:00</span><div class="hint">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Space / ‚¨ÜÔ∏é / –¢–∞–ø ¬∑ –î–≤–æ–π–Ω–æ–π –ø—Ä—ã–∂–æ–∫ ‚Äî –≤—Ç–æ—Ä–æ–π —Å–ª–∞–±–µ–µ</div></div>
            <div style="display:flex;gap:8px"><button id="restart" class="btn">–ó–∞–Ω–æ–≤–æ</button><button id="newSession" class="btn brand">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button></div>
          </div>
        </div>
      </div>
    </div>
    <div id="regOverlay" class="overlay" style="display:flex">
      <div class="panel">
        <div class="inner">
          <div>
            <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <div class="field"><label>–§–∞–º–∏–ª–∏—è *</label><input id="lastName" type="text" required></div>
            <div class="field"><label>–ò–º—è *</label><input id="firstName" type="text" required></div>
            <div class="field"><label>–û—Ç—á–µ—Å—Ç–≤–æ <span class="note">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span></label><input id="middleName" type="text"></div>
            <div class="field"><label>–¢–µ–ª–µ—Ñ–æ–Ω *</label><input id="phone" type="tel"></div>
            <div class="field"><label>Email</label><input id="email" type="email"></div>
            <label class="checkbox"><input id="consent" type="checkbox"> –°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</label>
            <div class="note">–î–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è –≤—ã–¥–∞—á–∏ –ø—Ä–∏–∑–∞ –∏ —Å–≤—è–∑–∏ —Å –≤–∞–º–∏.</div>
            <div style="margin-top:12px;text-align:right"><button id="startBtn" class="btn brand">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button></div>
            <div id="regErr" style="color:#d50000;margin-top:6px"></div>
          </div>
          <div class="prizes">
            <h3>–ü—Ä–∏–∑—ã –∏ –æ—á–∫–∏</h3>
            <div class="prize-row"><div>20‚Äì30</div><div>–ë—Ä–µ–ª–æ–∫</div></div>
            <div class="prize-row"><div>30‚Äì50</div><div>–ë–ª–æ–∫–Ω–æ—Ç –∏ —Ä—É—á–∫–∞</div></div>
            <div class="prize-row"><div>50‚Äì70</div><div>–®–æ–ø–ø–µ—Ä</div></div>
            <div class="prize-row"><div>70+</div><div>–¢–µ—Ä–º–æ—Å</div></div>
          </div>
        </div>
      </div>
    </div>
    <div id="resultOverlay" class="overlay">
      <div class="panel">
        <div class="inner" style="grid-template-columns:1fr">
          <div>
            <h2>–°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞</h2>
            <p>–í–∞—à –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <b id="finalBest">0</b> –æ—á–∫–æ–≤.</p>
            <p>–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏: <b id="prizeText">‚Äî</b></p>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –∑–∞ –ø—Ä–∏–∑–æ–º.</p>
            <div style="margin-top:12px;text-align:right"><button id="resultOk" class="btn brand">–ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="rotateHint" class="rotate-hint"><div><div style="font-size:18px;margin-bottom:8px">–ü–æ–≤–µ—Ä–Ω–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</div></div></div>
<script>
(function(){
  var canvas=document.getElementById('game');var ctx=canvas.getContext('2d');var W=canvas.width,H=canvas.height;var GROUND_Y=H-32
  var playerSprites={run:[Object.assign(new Image(),{src:"assets/player_run1.png"}),Object.assign(new Image(),{src:"assets/player_run2.png"})],jump:Object.assign(new Image(),{src:"assets/player_jump.png"})}
  var RUN_FRAME_MS=140,playerAnimTimerMs=0,playerAnimFrame=0,lastFrameTs=Date.now()
  function drawPlayer(){var inAir=!player.onGround;if(inAir){var imgJ=playerSprites.jump;if(imgJ.complete)ctx.drawImage(imgJ,player.x,player.y,player.w,player.h)}else{var now=Date.now();var dt=Math.min(100,now-lastFrameTs);lastFrameTs=now;playerAnimTimerMs+=dt;if(playerAnimTimerMs>=RUN_FRAME_MS){playerAnimTimerMs-=RUN_FRAME_MS;playerAnimFrame=(playerAnimFrame+1)%2}var imgR=playerSprites.run[playerAnimFrame];if(imgR.complete)ctx.drawImage(imgR,player.x,player.y,player.w,player.h)}}
  var GRAVITY=0.85,JUMP_VEL1=-12.2,JUMP_VEL2=-9.5,JUMP2_WINDOW_MS=400,JUMP2_MIN_UP_VY=1
  var SPEED_START=7.0,SPEED_ACCEL=0.04,SPAWN_MIN=340,SPAWN_VAR=300
  var worldSpeed=SPEED_START,score=0,best=0,gameOver=false,ready=false,runStart=Date.now();var rafId=null
  var player={x:50,y:GROUND_Y-56,w:56,h:56,vy:0,onGround:true,jumpCount:0,maxJumps:2,firstJumpAt:0}
  function jump(){if(gameOver||!ready)return;if(player.onGround){player.vy=JUMP_VEL1;player.onGround=false;player.jumpCount=1;player.firstJumpAt=Date.now();return}var since=Date.now()-player.firstJumpAt;if(player.jumpCount===1&&since<=JUMP2_WINDOW_MS&&player.vy<JUMP2_MIN_UP_VY){player.vy=JUMP_VEL2;player.jumpCount=2}}
  window.addEventListener('keydown',function(e){if(e.code==='Space'||e.code==='ArrowUp'){e.preventDefault();jump()}})
  canvas.addEventListener('pointerdown',jump)
})();
</script>
</body>
</html>
